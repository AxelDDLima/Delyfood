{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Pichau\\\\Desktop\\\\xexeu\\\\AllfilesDelyfood-main\\\\front-web\\\\src\\\\Orders\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { fetchProducts, saveOrder } from \"../api\";\nimport ProductsList from \"./ProductsList\";\nimport StepsHeader from \"./StepsHeader\";\nimport \"./styles.css\";\nimport OrderLocation from \"./OrderLocation\";\nimport OrderSummary from \"./OrderSummary\";\nimport { checkIsSelected } from \"./helpers\";\n\nfunction Orders() {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n  const [orderLocation, setOrderLocation] = useState();\n  const totalPrice = selectedProducts.reduce((sum, item) => {\n    return sum + item.price;\n  }, 0);\n  useEffect(() => {\n    fetchProducts().then(response => setProducts(response.data)).catch(() => {\n      toast.warning(\"Erro ao listar pedidos\");\n    });\n  }, []);\n\n  const handleSelectProduct = product => {\n    const isAlreadySelected = checkIsSelected(selectedProducts, product);\n\n    if (isAlreadySelected) {\n      const selected = selectedProducts.filter(item => item.id !== product.id);\n      setSelectedProducts(selected);\n    } else {\n      setSelectedProducts(previous => [...previous, product]);\n    }\n  };\n\n  const handleSubmit = () => {\n    const productsIds = selectedProducts.map(({\n      id\n    }) => ({\n      id\n    }));\n    const payload = { ...orderLocation,\n      products: productsIds\n    };\n    saveOrder(payload).then(response => {\n      toast.error(`Pedido enviado com sucesso! Nº ${response.data.id}`);\n      setSelectedProducts([]);\n    }).catch(() => {\n      toast.warning(\"Erro ao enviar pedido\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orders-container\",\n      children: [/*#__PURE__*/_jsxDEV(StepsHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductsList, {\n        products: products,\n        onSelectProduct: handleSelectProduct,\n        selectedProducts: selectedProducts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OrderLocation, {\n        onChangeLocation: location => setOrderLocation(location)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OrderSummary, {\n        amount: selectedProducts.length,\n        totalPrice: totalPrice,\n        onSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Orders, \"a0XR3mkaH+o1GuPfZzyP1pIgjB4=\");\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["C:/Users/Pichau/Desktop/xexeu/AllfilesDelyfood-main/front-web/src/Orders/index.tsx"],"names":["useEffect","useState","toast","fetchProducts","saveOrder","ProductsList","StepsHeader","OrderLocation","OrderSummary","checkIsSelected","Orders","products","setProducts","selectedProducts","setSelectedProducts","orderLocation","setOrderLocation","totalPrice","reduce","sum","item","price","then","response","data","catch","warning","handleSelectProduct","product","isAlreadySelected","selected","filter","id","previous","handleSubmit","productsIds","map","payload","error","location","length"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { fetchProducts, saveOrder } from \"../api\";\nimport ProductsList from \"./ProductsList\";\nimport StepsHeader from \"./StepsHeader\";\nimport \"./styles.css\";\nimport { OrderLocationData, Product } from \"./types\";\nimport OrderLocation from \"./OrderLocation\";\nimport OrderSummary from \"./OrderSummary\";\nimport { checkIsSelected } from \"./helpers\";\n\nfunction Orders() {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [selectedProducts, setSelectedProducts] = useState<Product[]>([]);\n  const [orderLocation, setOrderLocation] = useState<OrderLocationData>();\n  const totalPrice = selectedProducts.reduce((sum, item) => {\n    return sum + item.price;\n  }, 0);\n\n  useEffect(() => {\n    fetchProducts()\n      .then((response) => setProducts(response.data))\n      .catch(() => {\n        toast.warning(\"Erro ao listar pedidos\");\n      });\n  }, []);\n\n  const handleSelectProduct = (product: Product) => {\n    const isAlreadySelected = checkIsSelected(selectedProducts, product);\n\n    if (isAlreadySelected) {\n      const selected = selectedProducts.filter(\n        (item) => item.id !== product.id\n      );\n      setSelectedProducts(selected);\n    } else {\n      setSelectedProducts((previous) => [...previous, product]);\n    }\n  };\n\n  const handleSubmit = () => {\n    const productsIds = selectedProducts.map(({ id }) => ({ id }));\n    const payload = {\n      ...orderLocation!,\n      products: productsIds,\n    };\n\n    saveOrder(payload)\n      .then((response) => {\n        toast.error(`Pedido enviado com sucesso! Nº ${response.data.id}`);\n        setSelectedProducts([]);\n      })\n      .catch(() => {\n        toast.warning(\"Erro ao enviar pedido\");\n      });\n  };\n\n  return (\n    <>\n      <div className=\"orders-container\">\n        <StepsHeader />\n        <ProductsList\n          products={products}\n          onSelectProduct={handleSelectProduct}\n          selectedProducts={selectedProducts}\n        />\n        <OrderLocation\n          onChangeLocation={(location) => setOrderLocation(location)}\n        />\n        <OrderSummary\n          amount={selectedProducts.length}\n          totalPrice={totalPrice}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}