{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Pichau\\\\Desktop\\\\xexeu\\\\AllfilesDelyfood-main\\\\front-web\\\\src\\\\Orders\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { fetchProducts, saveOrder } from \"../api\";\nimport ProductsList from \"./ProductsList\";\nimport StepsHeader from \"./StepsHeader\";\nimport \"./styles.css\";\nimport OrderLocation from \"./OrderLocation\";\nimport OrderSummary from \"./OrderSummary\";\nimport { checkIsSelected } from \"./helpers\";\nimport Navbar from \"../Navbar\";\n\nfunction Orders() {\n  _s();\n\n  const [user, setUser] = useState();\n  const [id, setClientId] = useState(0);\n  useEffect(() => {\n    const getUser = localStorage.getItem('user');\n    const parseUser = JSON.parse(getUser);\n    const id = parseUser;\n    setUser(parseUser);\n    setClientId(id);\n  }, []); // useEffect(() => {\n  //   const getId: any = localStorage.getItem('user');\n  //   const {id} = JSON.parse(getId)\n  //   if (id) setId(id)\n  //   setId(id)\n  // })\n\n  const [products, setProducts] = useState([]);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n  const [orderLocation, setOrderLocation] = useState();\n  const totalPrice = selectedProducts.reduce((sum, item) => {\n    return sum + item.price;\n  }, 0);\n  useEffect(() => {\n    fetchProducts().then(response => setProducts(response.data)).catch(() => {\n      toast.warning(\"Erro ao listar pedidos\");\n    });\n  }, []);\n\n  const handleSelectProduct = product => {\n    const isAlreadySelected = checkIsSelected(selectedProducts, product);\n\n    if (isAlreadySelected) {\n      const selected = selectedProducts.filter(item => item.id !== product.id);\n      setSelectedProducts(selected);\n    } else {\n      setSelectedProducts(previous => [...previous, product]);\n    }\n  };\n\n  const handleSubmit = () => {\n    const productsIds = selectedProducts.map(({\n      id\n    }) => ({\n      id\n    }));\n    const payload = { ...orderLocation,\n      products: productsIds,\n      client: [{\n        id\n      }]\n    };\n    saveOrder(payload).then(response => {\n      toast.error(`Pedido enviado com sucesso! Nº ${response.data.id}`);\n      setSelectedProducts([]);\n    }).catch(() => {\n      toast.warning(\"Erro ao enviar pedido\");\n    });\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orders-container\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(StepsHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ProductsList, {\n        products: products,\n        onSelectProduct: handleSelectProduct,\n        selectedProducts: selectedProducts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(OrderLocation, {\n        onChangeLocation: location => setOrderLocation(location)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(OrderSummary, {\n        amount: selectedProducts.length,\n        totalPrice: totalPrice,\n        onSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 3\n    }, this)\n  }, void 0, false);\n}\n\n_s(Orders, \"WiXIdTRF2cmADt6EQIkRuyg/bjQ=\");\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["C:/Users/Pichau/Desktop/xexeu/AllfilesDelyfood-main/front-web/src/Orders/index.tsx"],"names":["useEffect","useState","toast","fetchProducts","saveOrder","ProductsList","StepsHeader","OrderLocation","OrderSummary","checkIsSelected","Navbar","Orders","user","setUser","id","setClientId","getUser","localStorage","getItem","parseUser","JSON","parse","products","setProducts","selectedProducts","setSelectedProducts","orderLocation","setOrderLocation","totalPrice","reduce","sum","item","price","then","response","data","catch","warning","handleSelectProduct","product","isAlreadySelected","selected","filter","previous","handleSubmit","productsIds","map","payload","client","error","location","length"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { fetchProducts, saveOrder } from \"../api\";\nimport ProductsList from \"./ProductsList\";\nimport StepsHeader from \"./StepsHeader\";\nimport \"./styles.css\";\nimport { OrderLocationData, Product } from \"./types\";\nimport OrderLocation from \"./OrderLocation\";\nimport OrderSummary from \"./OrderSummary\";\nimport { checkIsSelected } from \"./helpers\";\nimport Navbar from \"../Navbar\"\n\n\ntype User = {\n  cpf : string,\n  password : string\n}\n\nfunction Orders() {\n  const [user, setUser] = useState<User>();\n  const [id, setClientId] = useState(0)\n  \n  useEffect(() => {\n    const getUser: any = localStorage.getItem('user')\n    const parseUser = JSON.parse(getUser);\n    const id = parseUser;\n    setUser(parseUser)\n    setClientId(id)\n  }, []);\n\n  // useEffect(() => {\n  //   const getId: any = localStorage.getItem('user');\n  //   const {id} = JSON.parse(getId)\n  //   if (id) setId(id)\n  //   setId(id)\n  // })\n\n  const [products, setProducts] = useState<Product[]>([]);\n  const [selectedProducts, setSelectedProducts] = useState<Product[]>([]);\n  const [orderLocation, setOrderLocation] = useState<OrderLocationData>();\n  const totalPrice = selectedProducts.reduce((sum, item) => {\n    return sum + item.price;\n  }, 0);\n\n  useEffect(() => {\n    fetchProducts()\n      .then((response) => setProducts(response.data))\n      .catch(() => {\n        toast.warning(\"Erro ao listar pedidos\");\n      });\n  }, []);\n\n  const handleSelectProduct = (product: Product) => {\n    const isAlreadySelected = checkIsSelected(selectedProducts, product);\n\n    if (isAlreadySelected) {\n      const selected = selectedProducts.filter(\n        (item) => item.id !== product.id\n      );\n      setSelectedProducts(selected);\n    } else {\n      setSelectedProducts((previous) => [...previous, product]);\n    }\n  };\n\n\n  const handleSubmit = () => {\n    const productsIds = selectedProducts.map(({ id }) => ({ id }));\n    const payload = {\n      ...orderLocation!,\n      products: productsIds,\n      client: [{id}]\n    };\n\n    saveOrder(payload)\n      .then((response) => {\n        toast.error(`Pedido enviado com sucesso! Nº ${response.data.id}`);\n        setSelectedProducts([]);\n      })\n      .catch(() => {\n        toast.warning(\"Erro ao enviar pedido\");\n      });\n  };\n\n\n  if (!user) {\n    return null\n}\n  return (\n<>\n  <div className=\"orders-container\">\n    <Navbar />\n    <StepsHeader />\n      <ProductsList\n        products={products}\n        onSelectProduct={handleSelectProduct}\n        selectedProducts={selectedProducts}\n      />\n    <OrderLocation\n      onChangeLocation={(location) => setOrderLocation(location)}\n    />\n    <OrderSummary\n      amount={selectedProducts.length}\n      totalPrice={totalPrice}\n      onSubmit={handleSubmit}\n    />\n  </div>\n</>\n  );\n}\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}